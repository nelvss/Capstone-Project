<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
    integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="dashboard.css">
  <link rel="stylesheet" href="analytics.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <title>Analytics Dashboard - OTG Travel and Tours</title>
</head>

<body>
  <div class="sidebar">
    <div class="sidebar-header">
      <img src="../Images/logo.png" alt="Logo" class="sidebar-logo-img">
    </div>
    <nav>
      <ul>
        <li onclick="navigateWithTransition('dashboard.html')"><span class="icon">üìä</span> Dashboard</li>
        <li class="active" onclick="navigateWithTransition('analytics.html')"><span class="icon">üìà</span> Analytics</li>
        <li onclick="navigateWithTransition('payment.html')"><span class="icon">üí≥</span> Payment</li>
        <li onclick="navigateWithTransition('settings.html')"><span class="icon">‚öôÔ∏è</span> Settings</li>
      </ul>
    </nav>
    <div class="sidebar-footer">
      <button class="logout-btn" onclick="handleLogout()"><span class="icon">‚èª</span> Logout</button>
    </div>
  </div>
  <div class="main-content">
    <header>
      <button class="sidebar-toggle" onclick="toggleSidebar()">
        <span class="hamburger-icon">‚ò∞</span>
      </button>
      <h1>Analytics Dashboard</h1>
    </header>

    <!-- Analytics Dashboard Content -->
    <div class="analytics-container">
      <!-- Analytics Sidebar -->
      <div class="analytics-sidebar">
        <div class="d-flex flex-column">
          <h5 class="mb-4">Analytics Menu</h5>
          <a href="#overview" class="nav-link active" data-section="overview">
            <i class="fas fa-chart-line me-2"></i>Overview
          </a>
          <a href="#predictive" class="nav-link" data-section="predictive">
            <i class="fas fa-crystal-ball me-2"></i>Predictions
          </a>
          <a href="#feedback" class="nav-link" data-section="feedback">
            <i class="fas fa-comments me-2"></i>Feedback/Messages
          </a>
        </div>
      </div>

      <!-- Analytics Main Content -->
      <div class="analytics-main-content">
        <!-- Page Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
          <div>
            <h1 class="h2">Analytics Dashboard</h1>
            <p class="text-muted">Track booking trends, seasonal patterns, and service performance</p>
          </div>
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" id="refresh-data">
              <i class="fas fa-sync-alt me-1"></i>Refresh
            </button>
            <button type="button" class="btn btn-outline-secondary" id="export-data">
              <i class="fas fa-download me-1"></i>Export
            </button>
          </div>
        </div>

        <!-- Overview Section -->
        <section id="overview" class="analytics-section">
          <div class="row mb-4">
            <div class="col-md-3">
              <div class="card metric-card">
                <div class="card-body text-center">
                  <div class="metric-icon bg-primary">
                    <i class="fas fa-calendar-check"></i>
                  </div>
                  <h3 class="metric-value" id="total-bookings">1,247</h3>
                  <p class="metric-label">Total Bookings</p>
                  <span class="metric-change positive">+12.5%</span>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card metric-card">
                <div class="card-body text-center">
                  <div class="metric-icon bg-success">
                    <i class="fas fa-peso-sign"></i>
                  </div>
                  <h3 class="metric-value" id="total-revenue">‚Ç±2.4M</h3>
                  <p class="metric-label">Total Revenue</p>
                  <span class="metric-change positive">+18.2%</span>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card metric-card">
                <div class="card-body text-center">
                  <div class="metric-icon bg-warning">
                    <i class="fas fa-users"></i>
                  </div>
                  <h3 class="metric-value" id="total-customers">892</h3>
                  <p class="metric-label">Active Customers</p>
                  <span class="metric-change positive">+7.8%</span>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card metric-card">
                <div class="card-body text-center">
                  <div class="metric-icon bg-info">
                    <i class="fas fa-star"></i>
                  </div>
                  <h3 class="metric-value" id="avg-rating">4.8</h3>
                  <p class="metric-label">Average Rating</p>
                  <span class="metric-change positive">+0.3</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Revenue Trend Chart -->
          <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0">Revenue Trend (Last 12 Months)</h5>
              <div class="d-flex gap-2">
                <select class="form-select form-select-sm" id="revenueTrendYearFilter" style="width: 120px;">
                  <option value="2025">2025</option>
                </select>
                <select class="form-select form-select-sm" id="revenueTrendMonthFilter" style="width: 150px;">
                  <option value="all">All Months</option>
                </select>
                <select class="form-select form-select-sm" id="revenueTrendWeekFilter" style="width: 150px;">
                  <option value="all">All Weeks</option>
                </select>
              </div>
            </div>
            <div class="card-body">
              <canvas id="revenueTrendChart"></canvas>
            </div>
          </div>

          <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0">Booking Trends (Last 12 Months)</h5>
              <div class="d-flex gap-2">
                <select class="form-select form-select-sm" id="bookingTrendsYearFilter" style="width: 120px;">
                  <option value="2025">2025</option>
                </select>
                <select class="form-select form-select-sm" id="bookingTrendsMonthFilter" style="width: 150px;">
                  <option value="all">All Months</option>
                </select>
                <select class="form-select form-select-sm" id="bookingTrendsWeekFilter" style="width: 150px;">
                  <option value="all">All Weeks</option>
                </select>
              </div>
            </div>
            <div class="card-body">
              <canvas id="bookingTrendsChart"></canvas>
            </div>
          </div>

          <!-- Service Distribution Charts -->
          <div class="row mb-4">
            <div class="col-12">
              <div class="card shadow-sm">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                  <h5 class="card-title mb-0">
                    <i class="fas fa-chart-line me-2"></i>Tour Only
                  </h5>
                  <div class="d-flex gap-2">
                    <select class="form-select form-select-sm" id="tourOnlyYearFilter" style="width: 120px;">
                      <option value="2025">2025</option>
                    </select>
                    <select class="form-select form-select-sm" id="tourOnlyMonthFilter" style="width: 150px;">
                      <option value="all">All Months</option>
                    </select>
                    <select class="form-select form-select-sm" id="tourOnlyWeekFilter" style="width: 150px;">
                      <option value="all">All Weeks</option>
                    </select>
                  </div>
                </div>
                <div class="card-body">
                  <canvas id="chartdiv" style="width: 100%; height: 400px;"></canvas>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <div class="card shadow-sm">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                  <h5 class="card-title mb-0">
                    <i class="fas fa-chart-line me-2"></i>Package Tour
                  </h5>
                  <div class="d-flex gap-2">
                    <select class="form-select form-select-sm" id="packageTourYearFilter" style="width: 120px;">
                      <option value="2025">2025</option>
                    </select>
                    <select class="form-select form-select-sm" id="packageTourMonthFilter" style="width: 150px;">
                      <option value="all">All Months</option>
                    </select>
                    <select class="form-select form-select-sm" id="packageTourWeekFilter" style="width: 150px;">
                      <option value="all">All Weeks</option>
                    </select>
                  </div>
                </div>
                <div class="card-body">
                  <canvas id="chartdiv2" style="width: 100%; height: 400px;"></canvas>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Predictive Analytics Section -->
        <section id="predictive" class="analytics-section d-none">
          <div class="row mb-4">
            <div class="col-md-8">
              <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="card-title mb-0">Revenue Forecast (Next 6 Months)</h5>
                  <div class="d-flex gap-2">
                    <select class="form-select form-select-sm" id="revenueForecastYearFilter" style="width: 120px;">
                      <option value="2025">2025</option>
                      <option value="2026">2026</option>
                    </select>
                    <select class="form-select form-select-sm" id="revenueForecastMonthFilter" style="width: 150px;">
                      <option value="all">All Months</option>
                    </select>
                    <select class="form-select form-select-sm" id="revenueForecastWeekFilter" style="width: 150px;">
                      <option value="all">All Weeks</option>
                    </select>
                  </div>
                </div>
                <div class="card-body">
                  <canvas id="revenueForecastChart"></canvas>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">
                  <h5 class="card-title mb-0">Prediction Confidence</h5>
                </div>
                <div class="card-body">
                  <div class="confidence-meter">
                    <div class="progress mb-3">
                      <div class="progress-bar bg-success confidence-85" role="progressbar" 
                           aria-valuenow="85" aria-valuemin="0" aria-valuemax="100" 
                           aria-label="Prediction confidence level" title="85% confidence in revenue predictions"></div>
                    </div>
                    <p class="text-center"><strong>85% Confidence</strong></p>
                    <small class="text-muted">Based on historical data and market trends</small>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="card-title mb-0">Demand Prediction by Service</h5>
                  <div class="d-flex gap-2">
                    <select class="form-select form-select-sm" id="demandPredictionYearFilter" style="width: 120px;">
                      <option value="2025">2025</option>
                      <option value="2026">2026</option>
                    </select>
                    <select class="form-select form-select-sm" id="demandPredictionMonthFilter" style="width: 150px;">
                      <option value="all">All Months</option>
                    </select>
                    <select class="form-select form-select-sm" id="demandPredictionWeekFilter" style="width: 150px;">
                      <option value="all">All Weeks</option>
                    </select>
                  </div>
                </div>
                <div class="card-body">
                  <canvas id="demandPredictionChart"></canvas>
                </div>
              </div>
            </div>
          </div>

          <!-- Recommendations -->
          <div class="card">
            <div class="card-header">
              <h5 class="card-title mb-0">AI-Powered Recommendations</h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-4">
                  <div class="recommendation-card">
                    <div class="recommendation-icon bg-success">
                      <i class="fas fa-thumbs-up"></i>
                    </div>
                    <h6>Increase Island Hopping Capacity</h6>
                    <p class="small text-muted">Predicted 35% demand increase in Q2</p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="recommendation-card">
                    <div class="recommendation-icon bg-warning">
                      <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h6>Promote Diving Tours</h6>
                    <p class="small text-muted">Low season opportunity identified</p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="recommendation-card">
                    <div class="recommendation-icon bg-info">
                      <i class="fas fa-lightbulb"></i>
                    </div>
                    <h6>Weekend Package Deals</h6>
                    <p class="small text-muted">Higher conversion potential detected</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Feedback/Messages Section -->
        <section id="feedback" class="analytics-section d-none">
          <div class="row mb-4">
            <div class="col-12">
              <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="card-title mb-0">
                    <i class="fas fa-comments me-2"></i>Customer Feedback & Messages
                  </h5>
                  <div class="btn-group btn-group-sm" role="group">
                    <button type="button" class="btn btn-outline-primary active" data-filter="all">All</button>
                    <button type="button" class="btn btn-outline-primary" data-filter="unread">Unread</button>
                    <button type="button" class="btn btn-outline-primary" data-filter="read">Read</button>
                  </div>
                </div>
                <div class="card-body">
                  <div class="feedback-container" id="feedback-container">
                    <!-- Feedback items will be populated by JavaScript -->
                    <div class="feedback-item unread">
                      <div class="feedback-header">
                        <div class="feedback-info">
                          <span class="feedback-name">John Doe</span>
                          <span class="feedback-email">john.doe@example.com</span>
                          <span class="feedback-date">October 10, 2025</span>
                        </div>
                        <span class="badge bg-danger">Unread</span>
                      </div>
                      <div class="feedback-message">
                        I had an amazing experience with your island hopping tour! The guide was very knowledgeable and friendly. Would definitely recommend to friends and family.
                      </div>
                      <div class="feedback-actions">
                        <button class="btn btn-sm btn-outline-primary mark-read">
                          <i class="fas fa-check me-1"></i>Mark as Read
                        </button>
                        <button class="btn btn-sm btn-outline-danger delete-feedback">
                          <i class="fas fa-trash me-1"></i>Delete
                        </button>
                      </div>
                    </div>

                    <div class="feedback-item unread">
                      <div class="feedback-header">
                        <div class="feedback-info">
                          <span class="feedback-name">Maria Santos</span>
                          <span class="feedback-email">maria.santos@gmail.com</span>
                          <span class="feedback-date">October 9, 2025</span>
                        </div>
                        <span class="badge bg-danger">Unread</span>
                      </div>
                      <div class="feedback-message">
                        The booking process was smooth and easy. Customer service was very responsive to my inquiries. Thank you for making our vacation memorable!
                      </div>
                      <div class="feedback-actions">
                        <button class="btn btn-sm btn-outline-primary mark-read">
                          <i class="fas fa-check me-1"></i>Mark as Read
                        </button>
                        <button class="btn btn-sm btn-outline-danger delete-feedback">
                          <i class="fas fa-trash me-1"></i>Delete
                        </button>
                      </div>
                    </div>

                    <div class="feedback-item read">
                      <div class="feedback-header">
                        <div class="feedback-info">
                          <span class="feedback-name">Robert Chen</span>
                          <span class="feedback-email">robert.chen@yahoo.com</span>
                          <span class="feedback-date">October 8, 2025</span>
                        </div>
                        <span class="badge bg-secondary">Read</span>
                      </div>
                      <div class="feedback-message">
                        Great service! The hotel accommodations were excellent and the tour packages were reasonably priced. Will definitely book again.
                      </div>
                      <div class="feedback-actions">
                        <button class="btn btn-sm btn-outline-secondary mark-unread">
                          <i class="fas fa-envelope me-1"></i>Mark as Unread
                        </button>
                        <button class="btn btn-sm btn-outline-danger delete-feedback">
                          <i class="fas fa-trash me-1"></i>Delete
                        </button>
                      </div>
                    </div>

                    <div class="feedback-item read">
                      <div class="feedback-header">
                        <div class="feedback-info">
                          <span class="feedback-name">Lisa Anderson</span>
                          <span class="feedback-email">lisa.anderson@hotmail.com</span>
                          <span class="feedback-date">October 7, 2025</span>
                        </div>
                        <span class="badge bg-secondary">Read</span>
                      </div>
                      <div class="feedback-message">
                        I would like to inquire about group discounts for our company outing. Can you provide more information about packages for 30+ people?
                      </div>
                      <div class="feedback-actions">
                        <button class="btn btn-sm btn-outline-secondary mark-unread">
                          <i class="fas fa-envelope me-1"></i>Mark as Unread
                        </button>
                        <button class="btn btn-sm btn-outline-danger delete-feedback">
                          <i class="fas fa-trash me-1"></i>Delete
                        </button>
                      </div>
                    </div>

                    <div class="feedback-item read">
                      <div class="feedback-header">
                        <div class="feedback-info">
                          <span class="feedback-name">Michael Torres</span>
                          <span class="feedback-email">m.torres@email.com</span>
                          <span class="feedback-date">October 6, 2025</span>
                        </div>
                        <span class="badge bg-secondary">Read</span>
                      </div>
                      <div class="feedback-message">
                        The diving experience was phenomenal! Professional instructors and well-maintained equipment. Highly recommended for both beginners and experienced divers.
                      </div>
                      <div class="feedback-actions">
                        <button class="btn btn-sm btn-outline-secondary mark-unread">
                          <i class="fas fa-envelope me-1"></i>Mark as Unread
                        </button>
                        <button class="btn btn-sm btn-outline-danger delete-feedback">
                          <i class="fas fa-trash me-1"></i>Delete
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
  <script src="dashboard.js"></script>
  <script src="analytics.js"></script>
</body>

</html>