<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings - Owner Dashboard</title>
  <link rel="stylesheet" href="settings.css">
  <link rel="stylesheet" href="dashboard.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
    integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script defer src="settings.js"></script>
</head>
<body>
  <div class="sidebar">
    <div class="sidebar-header">
      <img src="../Images/logo.png" alt="Logo" class="sidebar-logo-img">
    </div>
    <nav>
      <ul>
        <li onclick="navigateWithTransition('dashboard.html')">
          <i class="fas fa-chart-line icon"></i>
          <span>Dashboard</span>
        </li>
        <li onclick="navigateWithTransition('analytics.html')">
          <i class="fas fa-chart-bar icon"></i>
          <span>Analytics</span>
        </li>
        <li onclick="navigateWithTransition('payment.html')">
          <i class="fas fa-credit-card icon"></i>
          <span>Payment</span>
        </li>
        <li class="active">
          <i class="fas fa-cog icon"></i>
          <span>Settings</span>
        </li>
      </ul>
    </nav>
    <div class="sidebar-footer">
      <button class="logout-btn" onclick="handleLogout()">
        <i class="fas fa-sign-out-alt icon"></i>
        <span>Logout</span>
      </button>
    </div>
  </div>
  <div class="main-content">
    <header>
      <div class="header-main">
        <button class="sidebar-toggle" onclick="toggleSidebar()">
          <span class="hamburger-icon">‚ò∞</span>
        </button>
        <div class="header-text">
          <h1>Service Settings</h1>
          <p class="header-subtitle">Pick a service type below to start configuring details.</p>
        </div>
      </div>
    </header>
    
    <section class="settings-tabs">
      <div class="tab-buttons">
        <button class="tab-btn active" data-tab="package" onclick="showTab(event, 'package')">üì¶ Package Only</button>
        <button class="tab-btn" data-tab="tour" onclick="showTab(event, 'tour')">üß≠ Tour Only</button>
        <button class="tab-btn" data-tab="van" onclick="showTab(event, 'van')">üöê Van Rental</button>
        <button class="tab-btn" data-tab="vehicle" onclick="showTab(event, 'vehicle')">üöó Vehicle Rental</button>
        <button class="tab-btn" data-tab="diving" onclick="showTab(event, 'diving')">ü§ø Diving</button>
        <button class="tab-btn" data-tab="qrcode" onclick="showTab(event, 'qrcode')">üì± QRCode</button>
      </div>
    </section>
    <section id="package-tab" class="tab-content active">
      <div class="settings-section">
        <div class="section-heading">
          <div>
            <h2>Package Only Settings</h2>
            <p class="section-subtitle">Manage packages in Supabase across hotels with pricing tiers stored in <code>package_only</code> and <code>package_pricing</code>.</p>
          </div>
          <div class="vehicle-actions-bar">
            <button id="package-refresh-btn" class="btn-secondary" type="button">‚Üª Refresh</button>
            <span id="package-sync-status" class="vehicle-sync-status" aria-live="polite">Last synced: waiting...</span>
          </div>
        </div>

        <div id="package-error" class="vehicle-error" role="alert" hidden></div>

        <div id="package-list" class="vehicle-list" role="list"></div>

        <template id="package-card-template">
          <article class="vehicle-card" role="listitem">
            <header class="vehicle-card-header">
              <div>
                <h3 class="package-description"></h3>
                <p class="vehicle-id"></p>
              </div>
              <span class="vehicle-status-tag" aria-live="polite"></span>
            </header>
            <div class="vehicle-card-body">
              <div class="vehicle-form">
                <label class="form-field">
                  <span>Description</span>
                  <input type="text" class="package-description-input" placeholder="e.g., 3D2N with Island Tour">
                </label>
                <label class="form-field">
                  <span>Category</span>
                  <input type="text" class="package-category-readonly" disabled>
                </label>
                <label class="form-field">
                  <span>Hotel</span>
                  <input type="text" class="package-hotel-readonly" disabled>
                </label>

                <div class="tour-pricing-section">
                  <h4>Pricing Tiers</h4>
                  <div class="package-pricing-list"></div>
                  <button type="button" class="btn-secondary package-add-pricing-btn">‚ûï Add Pricing Tier</button>
                </div>

                <div class="vehicle-form-actions">
                  <button type="button" class="btn-primary package-save-btn">Save Changes</button>
                  <button type="button" class="btn-danger package-delete-btn">üóëÔ∏è Delete</button>
                  <span class="vehicle-inline-status" aria-live="polite"></span>
                </div>
              </div>
            </div>
          </article>
        </template>
      </div>
    </section>

    <section id="tour-tab" class="tab-content">
      <div class="settings-section">
        <div class="section-heading">
          <div>
            <h2>Tour Only Settings</h2>
            <p class="section-subtitle">Manage tours synced with Supabase. Update categories, pricing tiers, and images stored in the <code>tour_only</code>, <code>tour_pricing</code>, and <code>tour_images</code> tables.</p>
          </div>
          <div class="vehicle-actions-bar">
            <button id="tour-add-btn" class="btn-primary" type="button">‚ûï Add Tour</button>
            <button id="tour-refresh-btn" class="btn-secondary" type="button">‚Üª Refresh</button>
            <span id="tour-sync-status" class="vehicle-sync-status" aria-live="polite">Last synced: waiting...</span>
          </div>
        </div>

        <div id="tour-error" class="vehicle-error" role="alert" hidden></div>

        <div id="tour-new-card" class="vehicle-card vehicle-new-card" role="article" hidden>
          <header class="vehicle-card-header">
            <div>
              <h3>New Tour</h3>
              <p class="vehicle-id">Creating new...</p>
            </div>
            <span class="vehicle-status-tag">New</span>
          </header>
          <div class="vehicle-card-body">
            <div class="vehicle-form">
              <label class="form-field">
                <span>Category</span>
                <select id="new-tour-category">
                  <option value="">Select category</option>
                  <option value="Inland Tour">Inland Tour</option>
                  <option value="Snorkeling Tour">Snorkeling Tour</option>
                  <option value="Island Tour">Island Tour</option>
                </select>
              </label>
              <div class="vehicle-form-actions">
                <button type="button" id="new-tour-save-btn" class="btn-primary">Create Tour</button>
                <button type="button" id="new-tour-cancel-btn" class="btn-secondary">Cancel</button>
                <span id="new-tour-status" aria-live="polite"></span>
              </div>
            </div>
          </div>
        </div>

        <div id="tour-list" class="vehicle-list" role="list"></div>

        <template id="tour-card-template">
          <article class="vehicle-card" role="listitem">
            <header class="vehicle-card-header">
              <div>
                <h3 class="tour-category"></h3>
                <p class="vehicle-id"></p>
              </div>
              <span class="vehicle-status-tag" aria-live="polite"></span>
            </header>
            <div class="vehicle-card-body">
              <div class="vehicle-form">
                <label class="form-field">
                  <span>Category</span>
                  <select class="tour-category-select">
                    <option value="Inland Tour">Inland Tour</option>
                    <option value="Snorkeling Tour">Snorkeling Tour</option>
                    <option value="Island Tour">Island Tour</option>
                  </select>
                </label>
                
                <div class="tour-images-section">
                  <h4>Images</h4>
                  <div class="tour-images-gallery"></div>
                  <button type="button" class="btn-secondary tour-upload-image-btn">üì∑ Upload Image</button>
                  <input type="file" class="tour-file-input" accept="image/*" hidden>
                  <small class="vehicle-image-hint">Stored in Supabase bucket <code>tour-images</code></small>
                </div>

                <div class="tour-pricing-section">
                  <h4>Pricing Tiers</h4>
                  <div class="tour-pricing-list"></div>
                  <button type="button" class="btn-secondary tour-add-pricing-btn">‚ûï Add Pricing Tier</button>
                </div>

                <div class="vehicle-form-actions">
                  <button type="button" class="btn-primary tour-save-btn">Save Changes</button>
                  <button type="button" class="btn-danger tour-delete-btn">üóëÔ∏è Delete</button>
                  <span class="vehicle-inline-status" aria-live="polite"></span>
                </div>
              </div>
            </div>
          </article>
        </template>
      </div>
    </section>

    <section id="van-tab" class="tab-content">
      <div class="settings-section">
        <div class="section-heading">
          <div>
            <h2>Van Rental Settings</h2>
            <p class="section-subtitle">Manage the van destinations synced with Supabase. Update location types, destination names, and pricing stored in the <code>van_destinations</code> table.</p>
          </div>
          <div class="vehicle-actions-bar">
            <button id="van-add-btn" class="btn-primary" type="button">‚ûï Add Destination</button>
            <button id="van-refresh-btn" class="btn-secondary" type="button">‚Üª Refresh</button>
            <span id="van-sync-status" class="vehicle-sync-status" aria-live="polite">Last synced: waiting...</span>
          </div>
        </div>

        <div id="van-error" class="vehicle-error" role="alert" hidden></div>

        <div id="van-new-card" class="vehicle-card vehicle-new-card" role="article" hidden>
          <header class="vehicle-card-header">
            <div>
              <h3>New Destination</h3>
              <p class="vehicle-id">Creating new...</p>
            </div>
            <span class="vehicle-status-tag">New</span>
          </header>
          <div class="vehicle-card-body">
            <div class="vehicle-form">
              <label class="form-field">
                <span>Location Type</span>
                <select id="new-van-location-type">
                  <option value="">Select location type</option>
                  <option value="Within Puerto Galera">Within Puerto Galera</option>
                  <option value="Outside Puerto Galera">Outside Puerto Galera</option>
                </select>
              </label>
              <label class="form-field">
                <span>Destination Name</span>
                <input type="text" id="new-van-destination-name" placeholder="e.g., Boracay Beach">
              </label>
              <label class="form-field">
                <span>One-way Price (‚Ç±)</span>
                <input type="number" min="0" step="0.01" id="new-van-oneway-price" placeholder="0.00">
              </label>
              <label class="form-field">
                <span>Round-trip Price (‚Ç±)</span>
                <input type="number" min="0" step="0.01" id="new-van-roundtrip-price" placeholder="0.00">
              </label>
              <div class="vehicle-form-actions">
                <button type="button" id="new-van-save-btn" class="btn-primary">Create Destination</button>
                <button type="button" id="new-van-cancel-btn" class="btn-secondary">Cancel</button>
                <span id="new-van-status" aria-live="polite"></span>
              </div>
            </div>
          </div>
        </div>

        <div id="van-list" class="vehicle-list" role="list"></div>

        <template id="van-card-template">
          <article class="vehicle-card" role="listitem">
            <header class="vehicle-card-header">
              <div>
                <h3 class="vehicle-name"></h3>
                <p class="vehicle-id"></p>
              </div>
              <span class="vehicle-status-tag" aria-live="polite"></span>
            </header>
            <div class="vehicle-card-body">
              <div class="vehicle-form">
                <label class="form-field">
                  <span>Location Type</span>
                  <select class="van-location-type">
                    <option value="">Select location type</option>
                    <option value="Within Puerto Galera">Within Puerto Galera</option>
                    <option value="Outside Puerto Galera">Outside Puerto Galera</option>
                  </select>
                </label>
                <label class="form-field">
                  <span>Destination Name</span>
                  <input type="text" class="van-destination-name" placeholder="e.g., Boracay Beach">
                </label>
                <label class="form-field">
                  <span>One-way Price (‚Ç±)</span>
                  <input type="number" min="0" step="0.01" class="van-oneway-price" placeholder="0.00">
                </label>
                <label class="form-field">
                  <span>Round-trip Price (‚Ç±)</span>
                  <input type="number" min="0" step="0.01" class="van-roundtrip-price" placeholder="0.00">
                </label>
                <div class="vehicle-form-actions">
                  <button type="button" class="btn-primary van-save-btn">Save Changes</button>
                  <button type="button" class="btn-danger van-delete-btn">üóëÔ∏è Delete</button>
                  <span class="vehicle-inline-status" aria-live="polite"></span>
                </div>
              </div>
            </div>
          </article>
        </template>
      </div>
    </section>

    <section id="vehicle-tab" class="tab-content">
      <div class="settings-section">
        <div class="section-heading">
          <div>
            <h2>Vehicle Rental Settings</h2>
            <p class="section-subtitle">Manage the vehicle inventory synced with Supabase. Update pricing, descriptions, and images stored in the <code>vehicles</code> table.</p>
          </div>
          <div class="vehicle-actions-bar">
            <button id="vehicle-add-btn" class="btn-primary" type="button">‚ûï Add Vehicle</button>
            <button id="vehicle-refresh-btn" class="btn-secondary" type="button">‚Üª Refresh</button>
            <span id="vehicle-sync-status" class="vehicle-sync-status" aria-live="polite">Last synced: waiting...</span>
          </div>
        </div>

        <div id="vehicle-error" class="vehicle-error" role="alert" hidden></div>

        <div id="vehicle-new-card" class="vehicle-card vehicle-new-card" role="article" hidden>
          <header class="vehicle-card-header">
            <div>
              <h3>New Vehicle</h3>
              <p class="vehicle-id">Creating new...</p>
            </div>
            <span class="vehicle-status-tag">New</span>
          </header>
          <div class="vehicle-card-body">
            <div class="vehicle-media">
              <div class="vehicle-image-wrapper">
                <img class="vehicle-image" src="../Images/logo.png" alt="Vehicle image">
                <div class="vehicle-image-actions">
                  <button type="button" id="new-vehicle-upload-btn" class="btn-secondary vehicle-upload-btn">Upload Image</button>
                  <input type="file" id="new-vehicle-file-input" class="vehicle-file-input" accept="image/*" hidden>
                  <small class="vehicle-image-hint">Stored in Supabase bucket <code>vehicle-rental</code></small>
                </div>
              </div>
            </div>
            <div class="vehicle-form">
              <label class="form-field">
                <span>Vehicle Name</span>
                <input type="text" id="new-vehicle-name" placeholder="e.g., Adventure Bike 200">
              </label>
              <label class="form-field">
                <span>Price per day (‚Ç±)</span>
                <input type="number" min="0" step="0.01" id="new-vehicle-price" placeholder="0.00">
              </label>
              <label class="form-field">
                <span>Description</span>
                <textarea id="new-vehicle-description" rows="4" placeholder="Describe the vehicle features and usage."></textarea>
              </label>
              <div class="vehicle-form-actions">
                <button type="button" id="new-vehicle-save-btn" class="btn-primary">Create Vehicle</button>
                <button type="button" id="new-vehicle-cancel-btn" class="btn-secondary">Cancel</button>
                <span id="new-vehicle-status" aria-live="polite"></span>
              </div>
            </div>
          </div>
        </div>

        <div id="vehicle-list" class="vehicle-list" role="list"></div>

        <template id="vehicle-card-template">
          <article class="vehicle-card" role="listitem">
            <header class="vehicle-card-header">
              <div>
                <h3 class="vehicle-name"></h3>
                <p class="vehicle-id"></p>
              </div>
              <span class="vehicle-status-tag" aria-live="polite"></span>
            </header>
            <div class="vehicle-card-body">
              <div class="vehicle-media">
                <div class="vehicle-image-wrapper">
                  <img class="vehicle-image" alt="Vehicle image">
                  <div class="vehicle-image-actions">
                    <button type="button" class="btn-secondary vehicle-upload-btn">Upload Image</button>
                    <input type="file" class="vehicle-file-input" accept="image/*" hidden>
                    <small class="vehicle-image-hint">Stored in Supabase bucket <code>vehicle-rental</code></small>
                  </div>
                </div>
              </div>
              <div class="vehicle-form">
                <label class="form-field">
                  <span>Price per day (‚Ç±)</span>
                  <input type="number" min="0" step="0.01" class="vehicle-price" placeholder="0.00">
                </label>
                <label class="form-field">
                  <span>Description</span>
                  <textarea class="vehicle-description" rows="4" placeholder="Add a short description owners can display to renters."></textarea>
                </label>
                <div class="vehicle-form-actions">
                  <button type="button" class="btn-primary vehicle-save-btn">Save Changes</button>
                  <button type="button" class="btn-danger vehicle-delete-btn">üóëÔ∏è Delete</button>
                  <span class="vehicle-inline-status" aria-live="polite"></span>
                </div>
              </div>
            </div>
          </article>
        </template>
      </div>
    </section>

    <section id="diving-tab" class="tab-content">
      <div class="settings-section">
        <div class="section-heading">
          <div>
            <h2>Diving Settings</h2>
            <p class="section-subtitle">Manage the diving inventory synced with Supabase. Update pricing and images stored in the <code>diving</code> table.</p>
          </div>
          <div class="vehicle-actions-bar">
            <button id="diving-add-btn" class="btn-primary" type="button">‚ûï Add Diving</button>
            <button id="diving-refresh-btn" class="btn-secondary" type="button">‚Üª Refresh</button>
            <span id="diving-sync-status" class="vehicle-sync-status" aria-live="polite">Last synced: waiting...</span>
          </div>
        </div>

        <div id="diving-error" class="vehicle-error" role="alert" hidden></div>

        <div id="diving-new-card" class="vehicle-card vehicle-new-card" role="article" hidden>
          <header class="vehicle-card-header">
            <div>
              <h3>New Diving</h3>
              <p class="vehicle-id">Creating new...</p>
            </div>
            <span class="vehicle-status-tag">New</span>
          </header>
          <div class="vehicle-card-body">
            <div class="vehicle-media">
              <div class="vehicle-image-wrapper">
                <img class="vehicle-image" src="../Images/logo.png" alt="Diving image">
                <div class="vehicle-image-actions">
                  <button type="button" id="new-diving-upload-btn" class="btn-secondary vehicle-upload-btn">Upload Image</button>
                  <input type="file" id="new-diving-file-input" class="vehicle-file-input" accept="image/*" hidden>
                  <small class="vehicle-image-hint">Stored in Supabase bucket <code>diving-image</code></small>
                </div>
              </div>
            </div>
            <div class="vehicle-form">
              <label class="form-field">
                <span>Diving Name</span>
                <input type="text" id="new-diving-name" placeholder="e.g., Scuba Diving Adventure">
              </label>
              <label class="form-field">
                <span>Price per head (‚Ç±)</span>
                <input type="number" min="0" step="0.01" id="new-diving-price" placeholder="0.00">
              </label>
              <div class="vehicle-form-actions">
                <button type="button" id="new-diving-save-btn" class="btn-primary">Create Diving</button>
                <button type="button" id="new-diving-cancel-btn" class="btn-secondary">Cancel</button>
                <span id="new-diving-status" aria-live="polite"></span>
              </div>
            </div>
          </div>
        </div>

        <div id="diving-list" class="vehicle-list" role="list"></div>

        <template id="diving-card-template">
          <article class="vehicle-card" role="listitem">
            <header class="vehicle-card-header">
              <div>
                <h3 class="vehicle-name"></h3>
                <p class="vehicle-id"></p>
              </div>
              <span class="vehicle-status-tag" aria-live="polite"></span>
            </header>
            <div class="vehicle-card-body">
              <div class="vehicle-media">
                <div class="vehicle-image-wrapper">
                  <img class="vehicle-image" alt="Diving image">
                  <div class="vehicle-image-actions">
                    <button type="button" class="btn-secondary vehicle-upload-btn">Upload Image</button>
                    <input type="file" class="vehicle-file-input" accept="image/*" hidden>
                    <small class="vehicle-image-hint">Stored in Supabase bucket <code>diving-image</code></small>
                  </div>
                </div>
              </div>
              <div class="vehicle-form">
                <label class="form-field">
                  <span>Price per head (‚Ç±)</span>
                  <input type="number" min="0" step="0.01" class="vehicle-price" placeholder="0.00">
                </label>
                <div class="vehicle-form-actions">
                  <button type="button" class="btn-primary vehicle-save-btn">Save Changes</button>
                  <button type="button" class="btn-danger vehicle-delete-btn">üóëÔ∏è Delete</button>
                  <span class="vehicle-inline-status" aria-live="polite"></span>
                </div>
              </div>
            </div>
          </article>
        </template>
      </div>
    </section>

    <section id="qrcode-tab" class="tab-content">
      <div class="settings-section">
        <div class="section-heading">
          <div>
            <h2>QRCode Settings</h2>
            <p class="section-subtitle">Manage QR codes synced with Supabase. Update payment methods and images stored in the <code>qrcode</code> table.</p>
          </div>
          <div class="vehicle-actions-bar">
            <button id="qrcode-add-btn" class="btn-primary" type="button">‚ûï Add QRCode</button>
            <button id="qrcode-refresh-btn" class="btn-secondary" type="button">‚Üª Refresh</button>
            <span id="qrcode-sync-status" class="vehicle-sync-status" aria-live="polite">Last synced: waiting...</span>
          </div>
        </div>

        <div id="qrcode-error" class="vehicle-error" role="alert" hidden></div>

        <div id="qrcode-new-card" class="vehicle-card vehicle-new-card" role="article" hidden>
          <header class="vehicle-card-header">
            <div>
              <h3>New QRCode</h3>
              <p class="vehicle-id">Creating new...</p>
            </div>
            <span class="vehicle-status-tag">New</span>
          </header>
          <div class="vehicle-card-body">
            <div class="vehicle-media">
              <div class="vehicle-image-wrapper">
                <img class="vehicle-image" src="../Images/logo.png" alt="QRCode image">
                <div class="vehicle-image-actions">
                  <button type="button" id="new-qrcode-upload-btn" class="btn-secondary vehicle-upload-btn">Upload Image</button>
                  <input type="file" id="new-qrcode-file-input" class="vehicle-file-input" accept="image/*" hidden>
                  <small class="vehicle-image-hint">Stored in Supabase bucket <code>qrcode-image</code></small>
                </div>
              </div>
            </div>
            <div class="vehicle-form">
              <label class="form-field">
                <span>Payment Method</span>
                <select id="new-qrcode-name">
                  <option value="">Select payment method</option>
                  <option value="GCash">GCash</option>
                  <option value="Paymaya">Paymaya</option>
                  <option value="Online Banking">Online Banking</option>
                </select>
              </label>
              <div class="vehicle-form-actions">
                <button type="button" id="new-qrcode-save-btn" class="btn-primary">Create QRCode</button>
                <button type="button" id="new-qrcode-cancel-btn" class="btn-secondary">Cancel</button>
                <span id="new-qrcode-status" aria-live="polite"></span>
              </div>
            </div>
          </div>
        </div>

        <div id="qrcode-list" class="vehicle-list" role="list"></div>

        <template id="qrcode-card-template">
          <article class="vehicle-card" role="listitem">
            <header class="vehicle-card-header">
              <div>
                <h3 class="vehicle-name"></h3>
                <p class="vehicle-id"></p>
              </div>
              <span class="vehicle-status-tag" aria-live="polite"></span>
            </header>
            <div class="vehicle-card-body">
              <div class="vehicle-media">
                <div class="vehicle-image-wrapper">
                  <img class="vehicle-image" alt="QRCode image">
                  <div class="vehicle-image-actions">
                    <button type="button" class="btn-secondary vehicle-upload-btn">Upload Image</button>
                    <input type="file" class="vehicle-file-input" accept="image/*" hidden>
                    <small class="vehicle-image-hint">Stored in Supabase bucket <code>qrcode-image</code></small>
                  </div>
                </div>
              </div>
              <div class="vehicle-form">
                <label class="form-field">
                  <span>Payment Method</span>
                  <select class="qrcode-name-select">
                    <option value="GCash">GCash</option>
                    <option value="Paymaya">Paymaya</option>
                    <option value="Online Banking">Online Banking</option>
                  </select>
                </label>
                <div class="vehicle-form-actions">
                  <button type="button" class="btn-primary qrcode-save-btn">Save Changes</button>
                  <button type="button" class="btn-danger qrcode-delete-btn">üóëÔ∏è Delete</button>
                  <span class="vehicle-inline-status" aria-live="polite"></span>
                </div>
              </div>
            </div>
          </article>
        </template>
      </div>
    </section>
  </div>

  <!-- Success Message -->
  <div id="success-message" class="success-message">
    <span class="success-icon">‚úÖ</span>
    <span class="success-text">Settings saved successfully!</span>
  </div>
</body>
</html>